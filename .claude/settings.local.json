{
  "permissions": {
    "allow": [
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(tree:*)",
      "Bash(npm install)",
      "Bash(npm run typecheck:*)",
      "Bash(npm run build:*)",
      "WebFetch(domain:github.com)",
      "Bash(gh repo view:*)",
      "Bash(find:*)",
      "Bash(timeout 5 npm run start:http:*)",
      "Bash(npm install:*)",
      "Bash(npm uninstall:*)",
      "Bash(wc:*)",
      "WebSearch",
      "Bash(MOCK_MODE=true PINGCODE_TOKEN=test timeout 3 node:*)",
      "Bash(MOCK_MODE=true PINGCODE_TOKEN=test node:*)",
      "Bash(MOCK_MODE=true PINGCODE_TOKEN=test TRANSPORT_MODE=http HTTP_PORT=13579 timeout:*)",
      "Bash(npx tsc:*)",
      "Bash(git rm:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Initial implementation of PingCode MCP Server\n\nMCP Tools:\n- user_work_summary: Query user workload summary with multi-dimensional aggregation\n- team_work_summary: Query team workload summary with matrix view\n- list_users: List enterprise members with pagination\n- list_workloads: List workload records by user/project/work_item\n- get_work_item: Get work item details\n- get_metrics: Get service runtime metrics\n- get_tool_versions: Get tool version info\n\nFeatures:\n- Time range support: date format and Chinese aliases \\(上周, 本月, etc.\\)\n- Auto time slicing for queries > 3 months\n- Multi-dimensional aggregation \\(day/week/month/project/work_item\\)\n- User matching by ID or fuzzy name match\n- Tool versioning with deprecation warnings\n\nNFR:\n- Performance: Work item caching, batch fetching, time auto-slicing\n- Reliability: Exponential backoff retry, rate limiting\n- Security: Token redaction in logs, API Key authentication\n- Observability: Request/error/latency/cache metrics\n- Compatibility: Multi-version tools, Nginx reverse proxy support\n\nDeployment modes:\n- stdio: For local AI clients \\(Claude Desktop\\)\n- HTTP/SSE: For server deployment with multi-client support\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git push:*)",
      "Bash(TRANSPORT_MODE=http MCP_API_KEY= MOCK_MODE=true node:*)",
      "Bash(TRANSPORT_MODE=http MCP_API_KEY=test123 MOCK_MODE=true timeout 3 node:*)",
      "WebFetch(domain:pingcode.apifox.cn)",
      "Bash(curl:*)",
      "Bash(done)",
      "WebFetch(domain:open.pingcode.com)",
      "Bash(__NEW_LINE_9cd6098ecb8ce8c0__ echo -e \"\\\\n=== 工作项类型 ===\")",
      "Bash(__NEW_LINE_0876a8fc161a8700__ echo -e \"\\\\n=== 现有工作项 ===\")",
      "Bash(PROJECT_ID=\"69846c3745079d734dc6facb\":*)",
      "Bash(TOKEN=\"38b755da-fcb6-4b97-a2ea-d61146076fbd\")",
      "Bash(__NEW_LINE_9be8ab47e1f89172__ curl -s -X POST \"https://open.pingcode.com/v1/project/projects/$PROJECT_ID/work_items\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d '{\n    \"\"work_item_type_id\"\": \"\"story\"\",\n    \"\"title\"\": \"\"用户登录功能\"\",\n    \"\"assignee_id\"\": \"\"32782cf0490d4165a0938455d5fccd43\"\"\n  }')",
      "Bash(__NEW_LINE_76f916de967ebf2a__ echo \"=== 读取工时 ===\")",
      "Bash(TOKEN=\"37a4479f-a7a0-4aa4-bd8a-776b2073eb9c\")",
      "Bash(__NEW_LINE_8cfb0a32e60423d9__ echo \"=== 用户列表（之前可用）===\")",
      "Bash(__NEW_LINE_1ff49cdfe6c845fd__ echo \"=== 创建 Story: 用户登录功能 ===\")",
      "Bash(__NEW_LINE_1b0bcd1d1a63a1d4__ curl -s -X POST \"https://open.pingcode.com/v1/project/work_items\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d \"{\"\"project_id\"\":\"\"$PROJECT_ID\"\",\"\"type_id\"\":\"\"story\"\",\"\"title\"\":\"\"用户登录功能\"\"}\")",
      "Bash(USER_YC=\"32782cf0490d4165a0938455d5fccd43\")",
      "Bash(WI_1=\"698471f3bafafcfca05139bb\")",
      "Bash(DATE_0127=1737936000)",
      "Bash(__NEW_LINE_ccdef4fc7251e657__ curl -s -X POST \"https://open.pingcode.com/v1/workloads\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d \"{\"\"principal_type\"\":\"\"work_item\"\",\"\"principal_id\"\":\"\"$WI_1\"\",\"\"user_id\"\":\"\"$USER_YC\"\",\"\"hours\"\":4,\"\"date_at\"\":$DATE_0127,\"\"description\"\":\"\"完成登录页面UI设计\"\"}\")",
      "Bash(__NEW_LINE_2f732f4c658813b8__ curl -s -X POST \"https://open.pingcode.com/v1/workloads\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d \"{\"\"principal_type\"\":\"\"work_item\"\",\"\"principal_id\"\":\"\"$WI_1\"\",\"\"user_id\"\":\"\"$USER_YC\"\",\"\"duration\"\":4,\"\"date_at\"\":$DATE_0127,\"\"description\"\":\"\"完成登录页面UI设计\"\"}\")",
      "Bash(__NEW_LINE_4c951693e5f18673__ curl -s -X POST \"https://open.pingcode.com/v1/workloads\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d \"{\"\"principal_type\"\":\"\"work_item\"\",\"\"principal_id\"\":\"\"$WI_1\"\",\"\"user_id\"\":\"\"$USER_YC\"\",\"\"duration\"\":4,\"\"date_at\"\":$DATE_0127,\"\"description\"\":\"\"完成登录页面UI设计\"\"}\")",
      "Bash(__NEW_LINE_4de73c42b953587a__ curl -s -X POST \"https://open.pingcode.com/v1/workloads\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d \"{\"\"principal_type\"\":\"\"work_item\"\",\"\"principal_id\"\":\"\"$WI_1\"\",\"\"user_id\"\":\"\"$USER_YC\"\",\"\"duration\"\":4,\"\"date_at\"\":$DATE_0127,\"\"report_at\"\":$DATE_0127,\"\"description\"\":\"\"完成登录页面UI设计\"\"}\")",
      "Bash(__NEW_LINE_fe8033c76843c781__ curl -s -X POST \"https://open.pingcode.com/v1/workloads\" -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d \"{\"\"principal_type\"\":\"\"work_item\"\",\"\"principal_id\"\":\"\"$WI_1\"\",\"\"user_id\"\":\"\"$USER_YC\"\",\"\"report_by_id\"\":\"\"$USER_YC\"\",\"\"duration\"\":4,\"\"date_at\"\":$DATE_0127,\"\"report_at\"\":$DATE_0127,\"\"description\"\":\"\"完成登录页面UI设计\"\"}\")",
      "Bash(# 停止之前的进程 pkill -f \"\"node dist/index.js\"\" || true sleep 1 # 直接用 stdio 模式测试，更简单 echo \"\"=== 使用 stdio 模式测试 ===\"\" echo ''{\"\"jsonrpc\"\":\"\"2.0\"\",\"\"id\"\":1,\"\"method\"\":\"\"initialize\"\",\"\"params\"\":{\"\"protocolVersion\"\":\"\"2024-11-05\"\",\"\"capabilities\"\":{},\"\"clientInfo\"\":{\"\"name\"\":\"\"test\"\",\"\"version\"\":\"\"1.0\"\"}}}'' | timeout 5 node dist/index.js)",
      "Bash(timeout 5 node:*)",
      "Bash(# 检查日志文件 echo \"\"=== 最新日志 ===\"\" ls -la logs/)",
      "Bash(node test-tools.mjs:*)",
      "Bash(python3:*)",
      "Bash(__NEW_LINE_0937a70f1ec8948d__ echo \"\")",
      "Bash(})",
      "Bash(__NEW_LINE_922b1c80d0ce747a__ echo \"创建 2026-01-27 的工时记录...\")",
      "Bash(create_workload $GDY1 6 \"用户登录功能开发\" $D27 $YC)",
      "Bash(create_workload $GDY2 4 \"数据报表需求分析\" $D27 $YC)",
      "Bash(create_workload $GDY3 5 \"权限管理设计\" $D27 $AISEN)",
      "Bash(create_workload $GDY4 4 \"系统设置开发\" $D27 $CYAN)",
      "Bash(create_workload $GDY5 5 \"API文档编写\" $D27 $VICTOR)",
      "Bash(__NEW_LINE_922b1c80d0ce747a__ echo \"\")",
      "Bash(create_workload $GDY1 5 \"登录功能联调\" $D28 $YC)",
      "Bash(create_workload $GDY2 6 \"报表原型设计\" $D28 $YC)",
      "Bash(create_workload $GDY3 4 \"权限接口开发\" $D28 $AISEN)",
      "Bash(create_workload $GDY7 3 \"Bug修复-导出超时\" $D28 $AISEN)",
      "Bash(create_workload $GDY4 5 \"系统设置测试\" $D28 $CYAN)",
      "Bash(create_workload $GDY5 4 \"API文档审核\" $D28 $VICTOR)",
      "Bash(create_workload $GDY2 5 \"报表数据库设计\" $D29 $CYAN)",
      "Bash(create_workload $GDY6 3 \"Bug修复-登录样式\" $D29 $YC)",
      "Bash(create_workload $GDY7 4 \"性能优化-导出\" $D29 $AISEN)",
      "Bash(create_workload $GDY5 3 \"API接口文档更新\" $D29 $VICTOR)",
      "Bash(create_workload $GDY1 4 \"登录功能优化\" $D30 $YC)",
      "Bash(create_workload $GDY2 5 \"报表前端开发\" $D30 $CYAN)",
      "Bash(create_workload $GDY3 5 \"权限功能测试\" $D30 $AISEN)",
      "Bash(create_workload $GDY5 4 \"技术文档整理\" $D30 $VICTOR)",
      "Bash(create_workload $GDY1 3 \"登录功能验收\" $D31 $YC)",
      "Bash(create_workload $GDY2 4 \"报表功能联调\" $D31 $YC)",
      "Bash(create_workload $GDY6 2 \"Bug验证-登录样式\" $D31 $YC)",
      "Bash(create_workload $GDY3 4 \"权限功能验收\" $D31 $AISEN)",
      "Bash(create_workload $GDY7 3 \"Bug验证-导出超时\" $D31 $AISEN)",
      "Bash(create_workload $GDY4 4 \"系统设置验收\" $D31 $CYAN)",
      "Bash(create_workload $GDY5 3 \"文档最终审核\" $D31 $VICTOR)",
      "Bash(node test-no-data.mjs:*)",
      "Bash(node test-empty.mjs:*)",
      "Bash(node:*)",
      "Bash(npm run test:quiet:*)",
      "Bash(ls:*)"
    ]
  }
}
